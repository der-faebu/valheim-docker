version: "3"

services: 
 # valheim-live: 
 #   image: lloesche/valheim-server
 #   cap_add:
 #     - sys_nice
 #   volumes: 
 #     - ./config:/config
 #     - ./data:/opt/valheim
 #   ports: 
 #     - "2456-2457:2456-2457/udp"
 #     - "9001:9001/tcp"
 #   env_file:
 #     - ./.valheim-live.env
 #   restart: always
 #   stop_grace_period: 2m

  discord-bot:
    image: docker.pkg.github.com/eliasase/valheim-discord-bot/valheim-discord-bot:0.1
    ports: 
      - "514:514/udp"
      - "514:514/tcp"
    env_file:
      - ./.valheim-stage.env
    restart: always
    stop_grace_period: 2m  

  valheim-live-stage: 
    image: lloesche/valheim-server
    cap_add:
      - sys_nice
    volumes: 
      - ./config-stage:/config
      - ./data-stage:/opt/valheim
    ports: 
      - "3456-3458:3456-3458/udp"
      - "9101:9101/tcp"
    env_file:
      - ./.valheim-stage.env
    restart: always
    stop_grace_period: 2m